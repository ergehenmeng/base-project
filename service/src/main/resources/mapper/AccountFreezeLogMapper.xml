<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.eghm.mapper.AccountFreezeLogMapper">

    <select id="getByPage" parameterType="com.eghm.dto.business.freeze.AccountFreezeQueryRequest" resultType="com.eghm.vo.business.freeze.AccountFreezeLogResponse">
        select
            t.unfreeze_time,
            t.remark,
            m.merchant_name,
            t.order_no,
            t.amount,
            t.state,
            t.change_type,
            t.create_time
        from account_freeze_log t
        left join merchant m on t.merchant_id = m.id
        where t.deleted = false
        <if test="param.state != null">
            and t.state = #{param.state}
        </if>
        <if test="param.changeType != null">
            and t.change_type = #{param.changeType}
        </if>
        <if test="param.merchantId != null">
            and t.merchant_id = #{param.merchantId}
        </if>
        <if test="param.startDate != null">
            and t.create_time &gt;= #{param.startDate}
        </if>
        <if test="param.endDate != null">
            and t.create_time &lt; #{param.endDate}
        </if>
        order by t.id desc
    </select>
</mapper>
